# Actividad Grupal: Diseño e Implementación de API Personalizada con NestJS y Prisma

!!! info "Descripción General"
    Como equipo de desarrollo, su tarea es diseñar y construir una **API RESTful completa** utilizando **NestJS** como framework, **Prisma** como ORM y **MySQL** como sistema de gestión de bases de datos relacionales. Esta actividad busca consolidar los conceptos aprendidos sobre la arquitectura de proyectos en NestJS, la definición de modelos, el manejo de relaciones con Prisma y la implementación de lógica de negocio.

## Tema del Proyecto

La elección del tema para la API es **completamente libre**. Pueden diseñar cualquier tipo de sistema, como:

- Un sistema de gestión para un pequeño negocio.
- Una plataforma de e-commerce simplificada.
- Una aplicación para organizar eventos.
- Una red social básica.

!!! tip
    Escojan un tema que les permita explorar y aplicar los conocimientos de diseño de bases de datos y arquitectura de software de manera práctica.

## Requisitos Mínimos

### 1. Entidades
La API debe gestionar **al menos tres (3) entidades distintas** relevantes al tema elegido. Cada entidad debe tener propiedades coherentes con su propósito.

### 2. Relaciones de Base de Datos
Deben establecer **al menos dos (2) relaciones significativas** entre las entidades, como:

- Relación uno-a-muchos.
- Relación muchos-a-muchos.

Estas relaciones deben ser lógicas y funcionales para el dominio de la aplicación.

### 3. Arquitectura NestJS
- **Módulos**: Organizar el código en módulos (`@Module()`) específicos para cada entidad o funcionalidad principal.
- **Controladores**: Implementar controladores (`@Controller()`) para manejar solicitudes HTTP (GET, POST, PUT, DELETE, PATCH, etc.), delegando la lógica de negocio a servicios.
- **Servicios**: Desarrollar servicios (`@Injectable()`) que encapsulen la lógica de negocio para operaciones CRUD (Crear, Leer, Actualizar, Eliminar), interactuando con la base de datos a través de Prisma.
- **DTOs**: Utilizar **Data Transfer Objects** para definir la estructura de los datos enviados y recibidos en las solicitudes (por ejemplo, para crear o actualizar una entidad).
- **Inyección de Dependencias**: Conectar controladores con servicios y servicios con el `PrismaService`.

### 4. Integración con Prisma y MySQL
- **Esquemas**: Definir las entidades y sus relaciones en el archivo `prisma/schema.prisma`.
- **Migraciones**: Generar y aplicar migraciones con Prisma (`npx prisma migrate dev`) para crear las tablas en MySQL.
- **PrismaService**: Configurar un servicio `PrismaService` para gestionar la conexión y desconexión con la base de datos, utilizado por todos los servicios para operaciones de persistencia.
- **Conexión a MySQL**: Configurar la conexión a través de la variable de entorno `DATABASE_URL` en el archivo `.env`.

### 5. Flujo de Solicitud
La implementación debe reflejar claramente el flujo de una solicitud HTTP:

1. Llega al controlador.
2. Pasa al servicio para aplicar la lógica de negocio.
3. Interactúa con la base de datos a través de Prisma (si es necesario).
4. Devuelve una respuesta al cliente.

### 6. Poblado de Datos (Opcional)
Considerar la creación de un **seeder** para poblar la base de datos con datos iniciales de prueba.

## Entregables Sugeridos

- **Código fuente completo** de la aplicación NestJS, organizado según la estructura de carpetas estándar de NestJS.
- Archivo `prisma/schema.prisma` con la definición de modelos y relaciones.
- Archivo `README.md` que incluya:
  - Explicación del tema de la API.
  - Descripción de las entidades y relaciones implementadas.
  - Instrucciones para ejecutar y probar la aplicación, incluyendo ejemplos de solicitudes (`curl` o Postman).

!!! example "Ejemplo de README.md"
    ```markdown
    # API de Gestión de Eventos

    ## Descripción
    Esta API permite gestionar eventos, usuarios y reservas, implementada con NestJS, Prisma y MySQL.

    ## Entidades y Relaciones
    - **Usuario**: Puede crear eventos y reservas (uno-a-muchos con Evento y Reserva).
    - **Evento**: Pertenece a un usuario y puede tener múltiples reservas (muchos-a-uno con Usuario, uno-a-muchos con Reserva).
    - **Reserva**: Relaciona un usuario con un evento (muchos-a-uno con ambos).

    ## Instrucciones para Ejecutar
    1. Clonar el repositorio.
    2. Instalar dependencias: `npm install`.
    3. Configurar `.env` con `DATABASE_URL`.
    4. Aplicar migraciones: `npx prisma migrate dev`.
    5. Iniciar la aplicación: `npm run start:dev`.

    ## Ejemplo de Solicitud
    ```bash
    curl -X POST http://localhost:3000/eventos \
      -H "Content-Type: application/json" \
      -d '{"titulo": "Concierto", "fecha": "2025-07-01", "usuarioId": 1}'